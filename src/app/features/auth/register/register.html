<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>{{ showRoleOption ? 'Registrar Nuevo Usuario' : 'Crear Cuenta' }}</h2>
      <button class="btn btn-secondary" (click)="volver()">← Volver</button>
    </div>
    
    <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
      
      <!-- Información Personal -->
      <div class="form-section">
        <h3>Información Personal</h3>
        
        <div class="form-group">
          <label for="nombre">Nombre Completo *</label>
          <input 
            type="text" 
            id="nombre" 
            name="nombre" 
            [(ngModel)]="userData.nombre" 
            required
            placeholder="Ingresa tu nombre completo">
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            [(ngModel)]="userData.email" 
            required
            placeholder="usuario@ejemplo.com">
        </div>
      </div>

      <!-- Contraseña -->
      <div class="form-section">
        <h3>Seguridad</h3>
        
        <div class="form-group">
          <label for="password">Contraseña *</label>
          <input 
            type="password" 
            id="password" 
            name="password" 
            [(ngModel)]="userData.password" 
            required
            minlength="6"
            placeholder="Mínimo 6 caracteres">
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña *</label>
          <input 
            type="password" 
            id="confirmPassword" 
            name="confirmPassword" 
            [(ngModel)]="userData.confirmPassword" 
            required
            placeholder="Repite tu contraseña">
        </div>
      </div>

      <!-- Rol (solo para admin) -->
      <div class="form-section" *ngIf="showRoleOption">
        <h3>Tipo de Usuario</h3>
        
        <div class="form-group">
          <label for="rol">Rol del Usuario</label>
          <select id="rol" name="rol" [(ngModel)]="userData.rol">
            <option *ngFor="let role of roles" [value]="role.value">
              {{ role.label }}
            </option>
          </select>
          <small class="help-text">
            ⚠️ Los administradores tienen acceso completo al sistema
          </small>
        </div>
      </div>

      <!-- Mensajes -->
      <div *ngIf="error" class="alert alert-error">
        {{ error }}
      </div>

      <div *ngIf="success" class="alert alert-success">
        {{ success }}
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="volver()">
          Cancelar
        </button>
        <button 
          type="submit" 
          class="btn btn-primary" 
          [disabled]="loading">
          {{ loading ? 'Registrando...' : 'Registrar Usuario' }}
        </button>
      </div>
    </form>

    <!-- Info para clientes -->
    <div *ngIf="!showRoleOption" class="login-link">
      <p>¿Ya tienes una cuenta? <a routerLink="/login">Inicia sesión aquí</a></p>
    </div>
  </div>
</div>
